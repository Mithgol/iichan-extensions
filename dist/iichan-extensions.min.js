!function(){"use strict";function e(){let e=document.querySelector("input[name=captcha]");e&&e.addEventListener("keypress",function(e){const t="йцукенгшщзхъїфыівапролджэєячсмитьбюёґ",n="qwertyuiop[]]assdfghjkl;''zxcvbnm,.`\\";let i,o=e.charCode||e.keyCode,r=String.fromCharCode(o).toLowerCase();if(!(o<1040||o>1279||(i=t.indexOf(r))===-1)){r=n[i];let t=e.target,o=r,d=t.scrollTop,c=t.selectionStart;t.value=t.value.substr(0,c)+o+t.value.substr(t.selectionEnd),t.setSelectionRange(c+o.length,c+o.length),t.focus(),t.scrollTop=d,e.preventDefault()}})}document.body?e():document.addEventListener("DOMContentLoaded",e)}(),function(){"use strict";function e(e){function t(e){if(!(screen.width<700||screen.height<700)){let t=this.querySelector(".thumb");if(t.classList.contains(i))return t.src=t.originalSrc,t.width=t.originalWidth,t.height=t.originalHeight,t.classList.remove(i),void e.preventDefault();let n=this.href,r=n.match(/\w*$/).toString();o.includes(r)&&(e.preventDefault(),t.originalSrc=t.src,t.originalWidth=t.width,t.originalHeight=t.height,t.removeAttribute("width"),t.removeAttribute("height"),t.classList.add(i),t.src=n)}}let n=document.querySelectorAll(".thumb");for(let r of n){let e=r.parentNode;e&&e.addEventListener("click",t)}}function t(){document.head.insertAdjacentHTML("beforeend",`<style type="text/css">
        .iichan-image-fullsize {
            max-width: 97%; max-height: 97%;
        }
      </style>`)}function n(){t(),e()}const i="iichan-image-fullsize",o=["jpg","jpeg","gif","png"];document.body?n():document.addEventListener("DOMContentLoaded",n)}(),function(){"use strict";function e(){return JSON.parse(window.localStorage.getItem(s)||"[]")}function t(e){window.localStorage.setItem(s,JSON.stringify(e))}function n(){let e=document.querySelectorAll("[id^=thread]");for(let t of e){let e=t.querySelector(":scope > label");if(e){e.insertAdjacentHTML("afterend",`
        <a class="${u}" title="Скрыть тред">[-]</a>
      `);let n=e.nextElementSibling;n.threadId=t.id,n.addEventListener("click",o)}}}function i(n){let i="object"==typeof n?n.target.threadId:n,o=e(),r=o.indexOf(i);if(r!==-1){o.splice(r,1),t(o);let e=document.getElementById(i);if(e){e.classList.remove(l);let t=document.getElementById("iichan-hidden-"+i);t&&t.parentElement.removeChild(t)}}}function o(n){let o="object"==typeof n?n.target.threadId:n,r=document.getElementById(o);if(r&&r.parentNode){let n=o.split("-")[1],d=r.querySelector(".filetitle").innerText||r.querySelector("blockquote").innerText||"изображение";d=d.substr(0,a);let c="iichan-hidden-"+o;r.insertAdjacentHTML("beforebegin",`
      <div class="reply ${h}" id="${c}">Тред <a>№${n}</a> скрыт (${d})</div>
    `);let s=r.previousElementSibling.querySelector(":scope > a");s.threadId=o,s.addEventListener("click",i),r.classList.add(l);let u=e();u.includes(o)||(u.push(o),t(u))}}function r(){let t=e();for(let n of t)o(n)}function d(){document.head.insertAdjacentHTML("beforeend",`<style type="text/css">
        .${h} {
            pointer-events: none;
        }
        
        .${h} a {
            cursor: pointer;
            pointer-events: auto;
        }
        
        .${h}:hover + div,
        .${h}:hover + div + br {
            display: block !important;
        }
        
        .iichan-thread-hidden {
            display: none;
        }
        .iichan-thread-hidden +  br {
            display: none;
        }
        
        .${u} {
            margin-left: 0.2em;
            cursor: pointer;
        }
      </style>`)}function c(){d(),n(),r()}const a=50,s="iichan_hidden_threads",l="iichan-thread-hidden",u="iichan-hide-thread-btn",h="iichan-hidden-thread-placeholder";document.body?c():document.addEventListener("DOMContentLoaded",c)}();