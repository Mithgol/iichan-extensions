!function(){"use strict";function e(){return JSON.parse(window.localStorage.getItem(l)||"[]")}function t(e){window.localStorage.setItem(l,JSON.stringify(e))}function n(){let e=document.querySelectorAll("[id^=thread]");for(let t of e){let e=t.querySelector(":scope > label");if(e){e.insertAdjacentHTML("afterend",`
        <a class="${u}" title="Скрыть тред">[-]</a>
      `);let n=e.nextElementSibling;n.threadId=t.id,n.addEventListener("click",d)}}}function i(n){let i="object"==typeof n?n.target.threadId:n,d=e(),c=d.indexOf(i);if(c!==-1){d.splice(c,1),t(d);let e=document.getElementById(i);if(e){e.classList.remove(s);let t=document.getElementById("iichan-hidden-"+i);t&&t.parentElement.removeChild(t)}}}function d(n){let d="object"==typeof n?n.target.threadId:n,c=document.getElementById(d);if(c&&c.parentNode){let n=d.split("-")[1],o=c.querySelector(".filetitle").innerText||c.querySelector("blockquote").innerText||"изображение";o=o.substr(0,a);let r="iichan-hidden-"+d;c.insertAdjacentHTML("beforebegin",`
      <div class="reply ${h}" id="${r}">Тред <a>№${n}</a> скрыт (${o})</div>
    `);let l=c.previousElementSibling.querySelector(":scope > a");l.threadId=d,l.addEventListener("click",i),c.classList.add(s);let u=e();u.includes(d)||(u.push(d),t(u))}}function c(){let t=e();for(let n of t)d(n)}function o(){document.head.insertAdjacentHTML("beforeend",`<style type="text/css">
        .${h} {
            pointer-events: none;
        }
        
        .${h} a {
            cursor: pointer;
            pointer-events: auto;
        }
        
        .${h}:hover + div,
        .${h}:hover + div + br {
            display: block !important;
        }
        
        .iichan-thread-hidden {
            display: none;
        }
        .iichan-thread-hidden +  br {
            display: none;
        }
        
        .${u} {
            margin-left: 0.2em;
            cursor: pointer;
        }
      </style>`)}function r(){o(),n(),c()}const a=50,l="iichan_hidden_threads",s="iichan-thread-hidden",u="iichan-hide-thread-btn",h="iichan-hidden-thread-placeholder";document.body?r():document.addEventListener("DOMContentLoaded",r)}();