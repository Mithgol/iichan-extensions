(()=>{"use strict";const t=()=>{const t=document.querySelector("input[name=captcha]");t&&t.addEventListener("keypress",t=>{const e="йцукенгшщзхъїфыівапролджэєячсмитьбюёґ",n="qwertyuiop[]]assdfghjkl;''zxcvbnm,.`\\";let c,o=t.charCode||t.keyCode,i=String.fromCharCode(o).toLowerCase();if(!(o<1040||o>1279||(c=e.indexOf(i))===-1)){i=n[c];const e=t.target,o=i,d=e.scrollTop,r=e.selectionStart;e.value=e.value.substr(0,r)+o+e.value.substr(e.selectionEnd),e.setSelectionRange(r+o.length,r+o.length),e.focus(),e.scrollTop=d,t.preventDefault()}})};document.body?t():document.addEventListener("DOMContentLoaded",t)})(),(()=>{"use strict";const t="(min-width: 10cm)",e=["jpg","jpeg","gif","png"],n=n=>{const c=e=>{if(window.matchMedia(t).matches){const t=e.currentTarget.querySelector(".thumb"),n=t.src==t.dataset.fullSrc;t.setAttribute("width",n?t.dataset.thumbWidth:t.dataset.fullWidth),t.setAttribute("height",n?t.dataset.thumbHeight:t.dataset.fullHeight),t.src=n?t.dataset.thumbSrc:t.dataset.fullSrc,e.preventDefault()}},o=document.querySelectorAll(".thumb");for(const i of o){const t=i.parentNode;if(t){const n=t.href.match(/\w*$/).toString();if(e.includes(n)){i.dataset.thumbWidth=i.getAttribute("width"),i.dataset.thumbHeight=i.getAttribute("height"),i.dataset.thumbSrc=i.src,i.dataset.fullSrc=t.href;const e=t.parentNode;if(e){const n=e.querySelector(".filesize > em");if(n){const e=n.innerText.match(/(\d*)x(\d*)/);i.dataset.fullWidth=e[1],i.dataset.fullHeight=e[2],t.addEventListener("click",c)}}}}}},c=()=>{document.head.insertAdjacentHTML("beforeend",`<style type="text/css">
        .thumb {
          max-width: 100%;
          height: auto;
          box-sizing: border-box;
          margin: 0;
          padding: 2px 20px
        }
        
      </style>`)},o=()=>{c(),n()};document.body?o():document.addEventListener("DOMContentLoaded",o)})(),(()=>{"use strict";const t=50,e="iichan_hidden_threads",n="iichan-thread-hidden",c="iichan-hide-thread-btn",o="iichan-hidden-thread-placeholder",i=window.location.href.match(/(?:\w+\.\w+\/)(.*)(?=\/)/)[1],d=()=>{const t=JSON.parse(window.localStorage.getItem(e)||"{}");return Array.isArray(t)?{}:t},r=t=>{window.localStorage.setItem(e,JSON.stringify(t))},s=()=>{const t=document.querySelectorAll("[id^=thread]");for(const e of t){const t=e.querySelector(":scope > label");if(t){t.insertAdjacentHTML("afterend",`
        <span class="${c}" title="Скрыть тред"></span>
      `);const n=t.nextElementSibling;n.threadId=e.id,n.addEventListener("click",u)}}},a=t=>{const e="object"==typeof t?t.target.threadId:t,c=d();c[i]||(c[i]=[]);const o=c[i].indexOf(e);if(o!==-1){c[i].splice(o,1),r(c);const t=document.getElementById(e);if(t){t.classList.remove(n);const c=document.getElementById("iichan-hidden-"+e);c&&c.parentElement.removeChild(c)}}},u=e=>{const c="object"==typeof e?e.target.threadId:e,s=document.getElementById(c);if(s&&s.parentNode){const e=c.split("-")[1];let u=s.querySelector(".filetitle").innerText||s.querySelector("blockquote").innerText;u=u.substr(0,t);const l="iichan-hidden-"+c;s.insertAdjacentHTML("beforebegin",`
      <div class="reply ${o}" id="${l}">Тред <a>№${e}</a> скрыт (${u||"изображение"})</div>
    `);const h=s.previousElementSibling.querySelector(":scope > a");h.threadId=c,h.addEventListener("click",a),s.classList.add(n);const f=d();f[i]||(f[i]=[]),f[i].includes(c)||(f[i].push(c),r(f))}},l=()=>{const t=d();if(t[i])for(const e of t[i])u(e)},h=()=>{document.head.insertAdjacentHTML("beforeend",`<style type="text/css">
        .${o} {
            pointer-events: none;
        }
        
        .${o} a {
            cursor: pointer;
            pointer-events: auto;
        }
        
        .${o}:hover + div,
        .${o}:hover + div + br {
            display: block !important;
        }
        
        .iichan-thread-hidden {
            display: none;
        }
        .iichan-thread-hidden +  br {
            display: none;
        }
        
        .${c} {
            margin-left: 0.2em;
            cursor: pointer;
        }
        
        .${c}::after {
            content: '[✕]';
        }
      </style>`)},f=()=>{const t=document.querySelectorAll("[id^=thread]");t.length<=1||(h(),s(),l())};document.body?f():document.addEventListener("DOMContentLoaded",f)})(),(()=>{"use strict";const t=["webm","mp4","ogv"],e="iichan-video-player",n=n=>{const c=t=>{const n=t.currentTarget.parentNode,c=document.createElement("video");c.src=t.currentTarget.href,c.classList.add(e),n.insertBefore(c,t.currentTarget),n.removeChild(t.currentTarget),t.preventDefault()},o=document.querySelectorAll(".thumb");for(const i of o){const e=i.parentNode;if(e){const n=e.href.split(".").pop();t.includes(n)&&e.addEventListener("click",c)}}},c=()=>{document.head.insertAdjacentHTML("beforeend",`<style type="text/css">
        .iichan-video-player {
            max-width: calc(100% - 42px);
        }
      </style>`)},o=()=>{c(),n()};document.body?o():document.addEventListener("DOMContentLoaded",o)})();