!function(){"use strict";function e(){let e=document.querySelector("input[name=captcha]");e&&e.addEventListener("keypress",function(e){const t="йцукенгшщзхъїфыівапролджэєячсмитьбюёґ",n="qwertyuiop[]]assdfghjkl;''zxcvbnm,.`\\";let i,r=e.charCode||e.keyCode,c=String.fromCharCode(r).toLowerCase();if(!(r<1040||r>1279||(i=t.indexOf(c))===-1)){c=n[i];let t=e.target,r=c,o=t.scrollTop,d=t.selectionStart;t.value=t.value.substr(0,d)+r+t.value.substr(t.selectionEnd),t.setSelectionRange(d+r.length,d+r.length),t.focus(),t.scrollTop=o,e.preventDefault()}})}document.body?e():document.addEventListener("DOMContentLoaded",e)}(),function(){"use strict";function e(e){function t(e){if(window.matchMedia(i).matches){let t=e.currentTarget.querySelector(".thumb"),n=!t.classList.toggle(c),i=e.currentTarget.href.match(/\w*$/).toString();r.includes(i)&&(t.src=n?t.thumbSrc:e.currentTarget.href,e.preventDefault())}}let n=document.querySelectorAll(".thumb");for(let o of n){o.removeAttribute("width"),o.removeAttribute("height"),o.thumbSrc=o.src;let e=o.parentNode;e&&e.addEventListener("click",t)}}function t(){document.head.insertAdjacentHTML("beforeend",`<style type="text/css">
        .iichan-image-fullsize {
            max-width: calc(100% - 42px);
        }
      </style>`)}function n(){t(),e()}const i="(min-width: 10cm)",r=["jpg","jpeg","gif","png"],c="iichan-image-fullsize";document.body?n():document.addEventListener("DOMContentLoaded",n)}(),function(){"use strict";function e(){return JSON.parse(window.localStorage.getItem(u)||"[]")}function t(e){window.localStorage.setItem(u,JSON.stringify(e))}function n(){let e=document.querySelectorAll("[id^=thread]");for(let t of e){let e=t.querySelector(":scope > label");if(e){e.insertAdjacentHTML("afterend",`
        <a class="${l}" title="Скрыть тред">[-]</a>
      `);let n=e.nextElementSibling;n.threadId=t.id,n.addEventListener("click",r)}}}function i(n){let i="object"==typeof n?n.target.threadId:n,r=e(),c=r.indexOf(i);if(c!==-1){r.splice(c,1),t(r);let e=document.getElementById(i);if(e){e.classList.remove(s);let t=document.getElementById("iichan-hidden-"+i);t&&t.parentElement.removeChild(t)}}}function r(n){let r="object"==typeof n?n.target.threadId:n,c=document.getElementById(r);if(c&&c.parentNode){let n=r.split("-")[1],o=c.querySelector(".filetitle").innerText||c.querySelector("blockquote").innerText;o=o.substr(0,a);let d="iichan-hidden-"+r;c.insertAdjacentHTML("beforebegin",`
      <div class="reply ${h}" id="${d}">Тред <a>№${n}</a> скрыт (${o||"изображение"})</div>
    `);let u=c.previousElementSibling.querySelector(":scope > a");u.threadId=r,u.addEventListener("click",i),c.classList.add(s);let l=e();l.includes(r)||(l.push(r),t(l))}}function c(){let t=e();for(let n of t)r(n)}function o(){document.head.insertAdjacentHTML("beforeend",`<style type="text/css">
        .${h} {
            pointer-events: none;
        }
        
        .${h} a {
            cursor: pointer;
            pointer-events: auto;
        }
        
        .${h}:hover + div,
        .${h}:hover + div + br {
            display: block !important;
        }
        
        .iichan-thread-hidden {
            display: none;
        }
        .iichan-thread-hidden +  br {
            display: none;
        }
        
        .${l} {
            margin-left: 0.2em;
            cursor: pointer;
        }
      </style>`)}function d(){o(),n(),c()}const a=50,u="iichan_hidden_threads",s="iichan-thread-hidden",l="iichan-hide-thread-btn",h="iichan-hidden-thread-placeholder";document.body?d():document.addEventListener("DOMContentLoaded",d)}();