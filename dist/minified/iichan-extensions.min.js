(()=>{"use strict";const e=()=>{const e=document.querySelector("input[name=captcha]");e&&e.addEventListener("keypress",e=>{const t="йцукенгшщзхъїфыівапролджэєячсмитьбюёґ",n="qwertyuiop[]]assdfghjkl;''zxcvbnm,.`\\";let o,c=e.charCode||e.keyCode,i=String.fromCharCode(c).toLowerCase();if(!(c<1040||c>1279||(o=t.indexOf(i))===-1)){i=n[o];const t=e.target,c=i,r=t.scrollTop,d=t.selectionStart;t.value=t.value.substr(0,d)+c+t.value.substr(t.selectionEnd),t.setSelectionRange(d+c.length,d+c.length),t.focus(),t.scrollTop=r,e.preventDefault()}})};document.body?e():document.addEventListener("DOMContentLoaded",e)})(),(()=>{"use strict";const e="(min-width: 10cm)",t=["jpg","jpeg","gif","png"],n="iichan-image-fullsize",o=o=>{const c=t=>{if(window.matchMedia(e).matches){const e=t.currentTarget.querySelector(".thumb"),o=e.classList.toggle(n);o?(e.removeAttribute("width"),e.removeAttribute("height")):(e.setAttribute("width",e.thumbWidth),e.setAttribute("height",e.thumbHeight)),e.src=o?t.currentTarget.href:e.thumbSrc,t.preventDefault()}},i=document.querySelectorAll(".thumb");for(const r of i){const e=r.parentNode;if(e){const n=e.href.match(/\w*$/).toString();t.includes(n)&&(r.thumbWidth=r.getAttribute("width"),r.thumbHeight=r.getAttribute("height"),r.thumbSrc=r.src,e.addEventListener("click",c))}}},c=()=>{document.head.insertAdjacentHTML("beforeend",`<style type="text/css">
        .iichan-image-fullsize {
            max-width: calc(100% - 42px);
        }
      </style>`)},i=()=>{c(),o()};document.body?i():document.addEventListener("DOMContentLoaded",i)})(),(()=>{"use strict";const e=50,t="iichan_hidden_threads",n="iichan-thread-hidden",o="iichan-hide-thread-btn",c="iichan-hidden-thread-placeholder",i=window.location.href.match(/(?:\w+\.\w+\/)(.*)(?=\/)/)[1],r=()=>{const e=JSON.parse(window.localStorage.getItem(t)||"{}");return Array.isArray(e)?{}:e},d=e=>{window.localStorage.setItem(t,JSON.stringify(e))},s=()=>{const e=document.querySelectorAll("[id^=thread]");for(const t of e){const e=t.querySelector(":scope > label");if(e){e.insertAdjacentHTML("afterend",`
        <span class="${o}" title="Скрыть тред"></span>
      `);const n=e.nextElementSibling;n.threadId=t.id,n.addEventListener("click",a)}}},u=e=>{const t="object"==typeof e?e.target.threadId:e,o=r();o[i]||(o[i]=[]);const c=o[i].indexOf(t);if(c!==-1){o[i].splice(c,1),d(o);const e=document.getElementById(t);if(e){e.classList.remove(n);const o=document.getElementById("iichan-hidden-"+t);o&&o.parentElement.removeChild(o)}}},a=t=>{const o="object"==typeof t?t.target.threadId:t,s=document.getElementById(o);if(s&&s.parentNode){const t=o.split("-")[1];let a=s.querySelector(".filetitle").innerText||s.querySelector("blockquote").innerText;a=a.substr(0,e);const l="iichan-hidden-"+o;s.insertAdjacentHTML("beforebegin",`
      <div class="reply ${c}" id="${l}">Тред <a>№${t}</a> скрыт (${a||"изображение"})</div>
    `);const h=s.previousElementSibling.querySelector(":scope > a");h.threadId=o,h.addEventListener("click",u),s.classList.add(n);const f=r();f[i]||(f[i]=[]),f[i].includes(o)||(f[i].push(o),d(f))}},l=()=>{const e=r();if(e[i])for(const t of e[i])a(t)},h=()=>{document.head.insertAdjacentHTML("beforeend",`<style type="text/css">
        .${c} {
            pointer-events: none;
        }
        
        .${c} a {
            cursor: pointer;
            pointer-events: auto;
        }
        
        .${c}:hover + div,
        .${c}:hover + div + br {
            display: block !important;
        }
        
        .iichan-thread-hidden {
            display: none;
        }
        .iichan-thread-hidden +  br {
            display: none;
        }
        
        .${o} {
            margin-left: 0.2em;
            cursor: pointer;
        }
        
        .${o}::after {
            content: '[✕]';
        }
      </style>`)},f=()=>{const e=document.querySelectorAll("[id^=thread]");e.length<=1||(h(),s(),l())};document.body?f():document.addEventListener("DOMContentLoaded",f)})(),(()=>{"use strict";const e=["webm","mp4","ogv"],t="iichan-video-player",n=n=>{const o=e=>{const n=e.currentTarget.parentNode,o=document.createElement("video");o.src=e.currentTarget.href,o.classList.add(t),n.instertBefore(o,e.currentTarget),n.removeChild(e.currentTarget),e.preventDefault()},c=document.querySelectorAll(".thumb");for(const i of c){const t=i.parentNode;if(t){const n=t.href.split(".").pop();e.includes(n)&&t.addEventListener("click",o)}}},o=()=>{document.head.insertAdjacentHTML("beforeend",`<style type="text/css">
        .iichan-video-player {
            max-width: calc(100% - 42px);
        }
      </style>`)},c=()=>{o(),n()};document.body?c():document.addEventListener("DOMContentLoaded",c)})();