(()=>{"use strict";const t=()=>{const t=document.querySelector("input[name=captcha]");t&&t.addEventListener("keypress",t=>{const e="йцукенгшщзхъїфыівапролджэєячсмитьбюёґ",n="qwertyuiop[]]assdfghjkl;''zxcvbnm,.`\\";let c,o=t.charCode||t.keyCode,i=String.fromCharCode(o).toLowerCase();if(!(o<1040||o>1279||(c=e.indexOf(i))===-1)){i=n[c];const e=t.target,o=i,d=e.scrollTop,r=e.selectionStart;e.value=e.value.substr(0,r)+o+e.value.substr(e.selectionEnd),e.setSelectionRange(r+o.length,r+o.length),e.focus(),e.scrollTop=d,t.preventDefault()}})};document.body?t():document.addEventListener("DOMContentLoaded",t)})(),(()=>{"use strict";const t="(min-width: 10cm)",e=["jpg","jpeg","gif","png"],n=n=>{const c=e=>{if(window.matchMedia(t).matches){const t=e.currentTarget.querySelector(".thumb"),n=t.src==t.dataset.fullSrc;t.setAttribute("width",n?t.dataset.thumbWidth:t.dataset.fullWidth),t.setAttribute("height",n?t.dataset.thumbHeight:t.dataset.fullHeight),t.src=n?t.dataset.thumbSrc:t.dataset.fullSrc,e.preventDefault()}},o=document.querySelectorAll(".thumb");for(const i of o){const t=i.parentNode;if(t){const n=t.href.match(/\w*$/).toString();if(e.includes(n)){i.dataset.thumbWidth=i.getAttribute("width"),i.dataset.thumbHeight=i.getAttribute("height"),i.dataset.thumbSrc=i.src,i.dataset.fullSrc=t.href;const e=t.parentNode;if(e){const n=e.querySelector(".filesize > em");if(n){const e=n.innerText.match(/(\d*)x(\d*)/);i.dataset.fullWidth=e[1],i.dataset.fullHeight=e[2],t.addEventListener("click",c)}}}}}},c=()=>{document.head.insertAdjacentHTML("beforeend",`<style type="text/css">
        .thumb {
          max-width: 100%;
          height: auto;
          box-sizing: border-box;
          margin: 0;
          padding: 2px 20px
        }
        
      </style>`)},o=()=>{c(),n()};document.body?o():document.addEventListener("DOMContentLoaded",o)})(),(()=>{"use strict";const t=50,e="iichan_hidden_threads",n="iichan-hide-thread-btn",c="iichan-hidden-thread-placeholder",o=window.location.href.match(/(?:\w+\.\w+\/)(.*)(?=\/)/)[1],i=()=>{const t=JSON.parse(window.localStorage.getItem(e)||"{}");return Array.isArray(t)?{}:t},d=t=>{window.localStorage.setItem(e,JSON.stringify(t))},r=()=>{const t=document.querySelectorAll("[id^=thread]");for(const e of t){const t=e.querySelector(":scope > label");if(t){t.insertAdjacentHTML("afterend",`
        <span class="${n}" title="Скрыть тред"></span>
      `);const c=t.nextElementSibling;c.threadId=e.id,c.addEventListener("click",a)}}},s=t=>{const e="object"==typeof t?t.target.threadId:t,n=i();n[o]||(n[o]=[]);const c=n[o].indexOf(e);if(c!==-1){n[o].splice(c,1),d(n);const t=document.getElementById(e);if(t){const t=document.getElementById("iichan-hidden-"+e);t&&t.parentElement.removeChild(t)}}},a=e=>{const n="object"==typeof e?e.target.threadId:e,r=document.getElementById(n);if(r&&r.parentNode){const e=n.split("-")[1];let a=r.querySelector(".filetitle").innerText||r.querySelector("blockquote").innerText;a=a.substr(0,t);const u="iichan-hidden-"+n;r.insertAdjacentHTML("beforebegin",`
      <div class="reply ${c}" id="${u}">Тред <a>№${e}</a> скрыт (${a||"изображение"})</div>
    `);const l=r.previousElementSibling.querySelector(":scope > a");l.threadId=n,l.addEventListener("click",s);const f=i();f[o]||(f[o]=[]),f[o].includes(n)||(f[o].push(n),d(f))}},u=()=>{const t=i();if(t[o])for(const e of t[o])a(e)},l=()=>{document.head.insertAdjacentHTML("beforeend",`<style type="text/css">
        .${c} {
            pointer-events: none;
        }
        
        .${c} a {
            cursor: pointer;
            pointer-events: auto;
        }
        
        .${c}:hover + div,
        .${c}:hover + div + br {
            display: block !important;
        }
        
        .${c} + div {
            display: none;
        }
        .${c} + div +  br {
            display: none;
        }
        
        .${n} {
            margin-left: 0.2em;
            cursor: pointer;
        }
        
        .${n}::after {
            content: '[✕]';
        }
      </style>`)},f=()=>{const t=document.querySelectorAll("[id^=thread]");t.length<=1||(l(),r(),u())};document.body?f():document.addEventListener("DOMContentLoaded",f)})(),(()=>{"use strict";const t=["webm","mp4","ogv"],e="iichan-video-player",n=n=>{const c=t=>{const n=t.currentTarget.parentNode,c=document.createElement("video");c.src=t.currentTarget.href,c.classList.add(e),n.insertBefore(c,t.currentTarget),n.removeChild(t.currentTarget),t.preventDefault()},o=document.querySelectorAll(".thumb");for(const i of o){const e=i.parentNode;if(e){const n=e.href.split(".").pop();t.includes(n)&&e.addEventListener("click",c)}}},c=()=>{document.head.insertAdjacentHTML("beforeend",`<style type="text/css">
        .iichan-video-player {
            max-width: calc(100% - 42px);
        }
      </style>`)},o=()=>{c(),n()};document.body?o():document.addEventListener("DOMContentLoaded",o)})();