(()=>{"use strict";const e=50,t="iichan_hidden_threads",n="iichan-hide-thread-btn",o="iichan-hidden-thread-placeholder",c=window.location.href.match(/(?:\w+\.\w+\/)(.*)(?=\/)/)[1],i=()=>{const e=JSON.parse(window.localStorage.getItem(t)||"{}");return Array.isArray(e)?{}:e},d=e=>{window.localStorage.setItem(t,JSON.stringify(e))},r=()=>{const e=document.querySelectorAll("[id^=thread]");for(const t of e){const e=t.querySelector(":scope > label");if(e){e.insertAdjacentHTML("afterend",`
        <span class="${n}" title="Скрыть тред"></span>
      `);const o=e.nextElementSibling;o.threadId=t.id,o.addEventListener("click",a)}}},s=e=>{const t="object"==typeof e?e.target.threadId:e,n=i();n[c]||(n[c]=[]);const o=n[c].indexOf(t);if(o!==-1){n[c].splice(o,1),d(n);const e=document.getElementById(t);if(e){const e=document.getElementById("iichan-hidden-"+t);e&&e.parentElement.removeChild(e)}}},a=t=>{const n="object"==typeof t?t.target.threadId:t,r=document.getElementById(n);if(r&&r.parentNode){const t=n.split("-")[1];let a=r.querySelector(".filetitle").innerText||r.querySelector("blockquote").innerText;a=a.substr(0,e);const l="iichan-hidden-"+n;r.insertAdjacentHTML("beforebegin",`
      <div class="reply ${o}" id="${l}">Тред <a>№${t}</a> скрыт (${a||"изображение"})</div>
    `);const u=r.previousElementSibling.querySelector(":scope > a");u.threadId=n,u.addEventListener("click",s);const h=i();h[c]||(h[c]=[]),h[c].includes(n)||(h[c].push(n),d(h))}},l=()=>{const e=i();if(e[c])for(const t of e[c])a(t)},u=()=>{document.head.insertAdjacentHTML("beforeend",`<style type="text/css">
        .${o} {
            pointer-events: none;
        }
        
        .${o} a {
            cursor: pointer;
            pointer-events: auto;
        }
        
        .${o}:hover + div,
        .${o}:hover + div + br {
            display: block !important;
        }
        
        .${o} + div {
            display: none;
        }
        .${o} + div +  br {
            display: none;
        }
        
        .${n} {
            margin-left: 0.2em;
            cursor: pointer;
        }
        
        .${n}::after {
            content: '[✕]';
        }
      </style>`)},h=()=>{const e=document.querySelectorAll("[id^=thread]");e.length<=1||(u(),r(),l())};document.body?h():document.addEventListener("DOMContentLoaded",h)})();