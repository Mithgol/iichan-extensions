!function(){"use strict";function e(){const e=JSON.parse(window.localStorage.getItem(l)||"{}");return Array.isArray(e)?{}:e}function t(e){window.localStorage.setItem(l,JSON.stringify(e))}function n(){let e=document.querySelectorAll("[id^=thread]");for(let t of e){let e=t.querySelector(":scope > label");if(e){e.insertAdjacentHTML("afterend",`
        <span class="${u}" title="Скрыть тред"></span>
      `);let n=e.nextElementSibling;n.threadId=t.id,n.addEventListener("click",d)}}}function i(n){let i="object"==typeof n?n.target.threadId:n,d=e();d[f]||(d[f]=[]);let r=d[f].indexOf(i);if(r!==-1){d[f].splice(r,1),t(d);let e=document.getElementById(i);if(e){e.classList.remove(s);let t=document.getElementById("iichan-hidden-"+i);t&&t.parentElement.removeChild(t)}}}function d(n){let d="object"==typeof n?n.target.threadId:n,r=document.getElementById(d);if(r&&r.parentNode){let n=d.split("-")[1],o=r.querySelector(".filetitle").innerText||r.querySelector("blockquote").innerText;o=o.substr(0,a);let c="iichan-hidden-"+d;r.insertAdjacentHTML("beforebegin",`
      <div class="reply ${h}" id="${c}">Тред <a>№${n}</a> скрыт (${o||"изображение"})</div>
    `);let l=r.previousElementSibling.querySelector(":scope > a");l.threadId=d,l.addEventListener("click",i),r.classList.add(s);let u=e();u[f]||(u[f]=[]),u[f].includes(d)||(u[f].push(d),t(u))}}function r(){let t=e();if(t[f])for(let n of t[f])d(n)}function o(){document.head.insertAdjacentHTML("beforeend",`<style type="text/css">
        .${h} {
            pointer-events: none;
        }
        
        .${h} a {
            cursor: pointer;
            pointer-events: auto;
        }
        
        .${h}:hover + div,
        .${h}:hover + div + br {
            display: block !important;
        }
        
        .iichan-thread-hidden {
            display: none;
        }
        .iichan-thread-hidden +  br {
            display: none;
        }
        
        .${u} {
            margin-left: 0.2em;
            cursor: pointer;
        }
        
        .${u}::after {
            content: '[✕]';
        }
      </style>`)}function c(){o(),n(),r()}const a=50,l="iichan_hidden_threads",s="iichan-thread-hidden",u="iichan-hide-thread-btn",h="iichan-hidden-thread-placeholder",f=window.location.href.match(/(?:\w+\.\w+\/)(.*)(?=\/)/)[1];document.body?c():document.addEventListener("DOMContentLoaded",c)}();