(()=>{"use strict";const e=50,t="iichan_hidden_threads",n="iichan-thread-hidden",i="iichan-hide-thread-btn",o="iichan-hidden-thread-placeholder",c=window.location.href.match(/(?:\w+\.\w+\/)(.*)(?=\/)/)[1],d=()=>{const e=JSON.parse(window.localStorage.getItem(t)||"{}");return Array.isArray(e)?{}:e},r=e=>{window.localStorage.setItem(t,JSON.stringify(e))},s=()=>{const e=document.querySelectorAll("[id^=thread]");for(const t of e){const e=t.querySelector(":scope > label");if(e){e.insertAdjacentHTML("afterend",`
        <span class="${i}" title="Скрыть тред"></span>
      `);const n=e.nextElementSibling;n.threadId=t.id,n.addEventListener("click",l)}}},a=e=>{const t="object"==typeof e?e.target.threadId:e,i=d();i[c]||(i[c]=[]);const o=i[c].indexOf(t);if(o!==-1){i[c].splice(o,1),r(i);const e=document.getElementById(t);if(e){e.classList.remove(n);const i=document.getElementById("iichan-hidden-"+t);i&&i.parentElement.removeChild(i)}}},l=t=>{const i="object"==typeof t?t.target.threadId:t,s=document.getElementById(i);if(s&&s.parentNode){const t=i.split("-")[1];let l=s.querySelector(".filetitle").innerText||s.querySelector("blockquote").innerText;l=l.substr(0,e);const u="iichan-hidden-"+i;s.insertAdjacentHTML("beforebegin",`
      <div class="reply ${o}" id="${u}">Тред <a>№${t}</a> скрыт (${l||"изображение"})</div>
    `);const h=s.previousElementSibling.querySelector(":scope > a");h.threadId=i,h.addEventListener("click",a),s.classList.add(n);const f=d();f[c]||(f[c]=[]),f[c].includes(i)||(f[c].push(i),r(f))}},u=()=>{const e=d();if(e[c])for(const t of e[c])l(t)},h=()=>{document.head.insertAdjacentHTML("beforeend",`<style type="text/css">
        .${o} {
            pointer-events: none;
        }
        
        .${o} a {
            cursor: pointer;
            pointer-events: auto;
        }
        
        .${o}:hover + div,
        .${o}:hover + div + br {
            display: block !important;
        }
        
        .iichan-thread-hidden {
            display: none;
        }
        .iichan-thread-hidden +  br {
            display: none;
        }
        
        .${i} {
            margin-left: 0.2em;
            cursor: pointer;
        }
        
        .${i}::after {
            content: '[✕]';
        }
      </style>`)},f=()=>{const e=document.querySelectorAll("[id^=thread]");e.length<=1||(h(),s(),u())};document.body?f():document.addEventListener("DOMContentLoaded",f)})();