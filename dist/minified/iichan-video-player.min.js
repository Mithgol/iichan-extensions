(()=>{"use strict";const e=["webm","mp4","ogv"],t="iichan-video-player",r=e=>{const r=e.currentTarget.parentNode;if(e.currentTarget.dataset.videoMode)e.currentTarget.dataset.videoMode=!1,r.removeChild(e.currentTarget.dataset.videoPlayer),e.currentTarget.innerHTML=e.currentTarget.dataset.thumbHTML;else{e.currentTarget.dataset.videoMode=!0;const n=document.createElement("video");n.poster=e.currentTarget.dataset.thumbSrc,n.src=e.currentTarget.href,n.autoplay=!0,n.controls=!0,n.loop=!0,n.muted=!0,n.classList.add(t),e.currentTarget.dataset.videoPlayer=n,r.insertAfter(n,e.currentTarget),e.currentTarget.innerHTML="[Свернуть видео]"}e.preventDefault()},n=t=>{const n=(t||document).querySelectorAll(".thumb");for(const o of n){const t=o.parentNode;if(t){const n=t.href.split(".").pop();e.includes(n)&&(t.dataset.thumbSrc=o.src,t.dataset.thumbHTML=t.innerHTML,t.addEventListener("click",r))}}},o=()=>document.head.insertAdjacentHTML("beforeend",`<style type="text/css">.iichan-video-player {
      max-width: 100%;
      height: auto;
      box-sizing: border-box;
      margin: 2px 20px;
    }</style>`),c=()=>{if(!document.querySelector("#de-main")){o(),n();const e=new MutationObserver(e=>{e.forEach(e=>{for(const t of e.addedNodes){if(!t.querySelectorAll)return;n(t)}})});e.observe(document.body,{childList:!0,subtree:!0})}};document.body?c():document.addEventListener("DOMContentLoaded",c)})();